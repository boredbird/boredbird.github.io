---
title: 随机森林
date: 2017-11-11 14:25:12 
categories: "机器学习" 
tags: 
     - 随机森林
     - RF
     - 决策树
description: 随机森林
toc: true
---
# Bootstraping
Bootstraping的名称来自成语“pull up by your own bootstraps”,意思是依靠你自己的资源，称为自助法，它是一种有放回的抽样方法。本意是通过拉靴子让自己上升，不可能发生的事情。后来意思发生了转变，隐喻不需要外界帮助，仅依靠自身力量让自己变得更好。

# Bagging的策略
* bootstrap aggregation
* 从样本集中重采样（有重复的）选出n个样本
* 在所有属性上，对这n个样本建立分类器（ID3，C4.5，CART,SVM,Logistic回归等）
* 重复以上两部m次，即获得了m个分类器
* 将数据放在这m个分类器上，最后根据这m个分类器的投票结果，决定数据属于哪一类

<!--more-->

## Another description of Bagging
<div class="fig figcenter fighighlight">
  <img src="/assets/chinahadoop/随机森林/TIM截图20171111154221.png" width="80%">
  <div class="figcaption">
  </div>
</div>

# 随机森林
随机森林在Bagging基础上做了修改：
* 从样本集中用Bootstrap采样选出n个样本；
* 从所有属性中随机选择k个属性，选择最佳分割属性作为节点建立CART决策树；
* 重复以上两步m次，即建立了m棵CART决策树
* 这m个CART形成随机森林，通过投票表决结果，决定数据属于哪一类

# 随机森林/Bagging和决策树的关系
* 当然可以使用决策树作为基本分类器
* 但也可以使用SVM、Logistic回归等其他分类器，习惯上，这些分类器组成的“总分类器”，仍然叫做随机森林。

# 投票机制
## 简单投票机制
* 一票否决（一致表决）
* 少数服从多数
* * 有效多数（加权）
* 阈值表决
## 贝叶斯投票机制
### 一种可能的方案
<div class="fig figcenter fighighlight">
  <img src="/assets/chinahadoop/随机森林/TIM截图20171111160210.png" width="80%">
  <div class="figcaption">
  </div>
</div>

# 样本不均衡的常用处理方法
<div class="fig figcenter fighighlight">
  <img src="/assets/chinahadoop/随机森林/TIM截图20171111160311.png" width="80%">
  <div class="figcaption">
  </div>
</div>

# 使用RF建立计算样本间相似度
<div class="fig figcenter fighighlight">
  <img src="/assets/chinahadoop/随机森林/TIM截图20171111160400.png" width="80%">
  <div class="figcaption">
  </div>
</div>

# 使用RF计算特征重要度
<div class="fig figcenter fighighlight">
  <img src="/assets/chinahadoop/随机森林/TIM截图20171111160459.png" width="80%">
  <div class="figcaption">
  </div>
</div>

# 使用RF生成特征
<div class="fig figcenter fighighlight">
  <img src="/assets/chinahadoop/随机森林/TIM截图20171111155508.png" width="80%">
  <div class="figcaption">
  </div>
</div>

# 总结
* 决策树、随机森林的代码清洗，逻辑简单，在胜任分类问题的同时，往往也可以作为对数据分布探索的首要尝试算法。
* 随机森林的集成思想也可以用在其他分类器的设计中。
* 如果通过随机森林做样本的异常值检测
* * 统计样本间位于相同决策树的叶节点的个数，形成样本相似度矩阵
