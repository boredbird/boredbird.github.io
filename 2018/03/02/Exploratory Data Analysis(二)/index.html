<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />










  <meta name="baidu-site-verification" content="Pl2GAjqhdU" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Comparative,Screening,Optimization,Regression,Time Series,Multivariate," />










<meta name="description" content="Exploratory Data Analysis(二)">
<meta name="keywords" content="Comparative,Screening,Optimization,Regression,Time Series,Multivariate">
<meta property="og:type" content="article">
<meta property="og:title" content="Exploratory Data Analysis(二)">
<meta property="og:url" content="http://zhangchunhui.cn/2018/03/02/Exploratory Data Analysis(二)/index.html">
<meta property="og:site_name" content="boredbird">
<meta property="og:description" content="Exploratory Data Analysis(二)">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://zhangchunhui.cn/2018/03/02/Exploratory%20Data%20Analysis(二)/assets/EDA/randn4p.gif">
<meta property="og:image" content="http://zhangchunhui.cn/2018/03/02/Exploratory%20Data%20Analysis(二)/assets/EDA/lew4p.gif">
<meta property="og:updated_time" content="2018-03-02T06:39:00.421Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Exploratory Data Analysis(二)">
<meta name="twitter:description" content="Exploratory Data Analysis(二)">
<meta name="twitter:image" content="http://zhangchunhui.cn/2018/03/02/Exploratory%20Data%20Analysis(二)/assets/EDA/randn4p.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zhangchunhui.cn/2018/03/02/Exploratory Data Analysis(二)/"/>





  <title>Exploratory Data Analysis(二) | boredbird</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?bd5a63e2d0d6f11fcae1d6b1506b54ef";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">boredbird</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhangchunhui.cn/2018/03/02/Exploratory Data Analysis(二)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="boredbird">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/assets/pic_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="boredbird">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Exploratory Data Analysis(二)</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-02T11:26:12+08:00">
                2018-03-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/statistics/" itemprop="url" rel="index">
                    <span itemprop="name">statistics</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/02/Exploratory Data Analysis(二)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2018/03/02/Exploratory Data Analysis(二)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2018/03/02/Exploratory Data Analysis(二)/" class="leancloud_visitors" data-flag-title="Exploratory Data Analysis(二)">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

          
              <div class="post-description">
                  Exploratory Data Analysis(二)
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="1-2-EDA-Assumptions"><a href="#1-2-EDA-Assumptions" class="headerlink" title="1.2. EDA Assumptions"></a>1.2. EDA Assumptions</h2><p>The gamut of scientific and engineering experimentation is virtually limitless. In this sea of diversity is there any common basis that allows the analyst to systematically and validly arrive at supportable, repeatable research conclusions?</p>
<p>Fortunately, there is such a basis and it is rooted in the fact that every measurement process, however complicated, has certain underlying assumptions. This section deals with what those assumptions are, why they are important, how to go about testing them, and what the consequences are if the assumptions do not hold.</p>
<h3 id="1-2-1-Underlying-Assumptions"><a href="#1-2-1-Underlying-Assumptions" class="headerlink" title="1.2.1. Underlying Assumptions"></a>1.2.1. Underlying Assumptions</h3><h4 id="Assumptions-Underlying-a-Measurement-Process"><a href="#Assumptions-Underlying-a-Measurement-Process" class="headerlink" title="Assumptions Underlying a Measurement Process"></a>Assumptions Underlying a Measurement Process</h4><p>There are four assumptions that typically underlie all measurement processes; namely, that the data from the process at hand “behave like”:</p>
<pre><code>1. random drawings;
2. from a fixed distribution;
3. with the distribution having fixed location; and
4. with the distribution having fixed variation.
</code></pre><h4 id="Univariate-or-Single-Response-Variable"><a href="#Univariate-or-Single-Response-Variable" class="headerlink" title="Univariate or Single Response Variable"></a>Univariate or Single Response Variable</h4><p>The “fixed location” referred to in item 3 above differs for different problem types. The simplest problem type is univariate; that is, a single variable.</p>
<pre><code>For the univariate problem, the general model
    response = deterministic component + random component
becomes
    response = constant + error
</code></pre><h4 id="Assumptions-for-Univariate-Model"><a href="#Assumptions-for-Univariate-Model" class="headerlink" title="Assumptions for Univariate Model"></a>Assumptions for Univariate Model</h4><p>For this case, the “fixed location” is simply the unknown constant. We can thus imagine the process at hand to be operating under constant conditions that produce a single column of data with the properties that</p>
<pre><code>• the data are uncorrelated with one another;
• the random component has a fixed distribution;
• the deterministic component consists of only a constant; and
• the random component has fixed variation.
</code></pre><h4 id="Extrapolation-to-a-Function-of-Many-Variables"><a href="#Extrapolation-to-a-Function-of-Many-Variables" class="headerlink" title="Extrapolation to a Function of Many Variables"></a>Extrapolation to a Function of Many Variables</h4><p>The universal power and importance of the univariate model is that it can easily be extended to the more general case where the deterministic component is not just a constant, but is in fact a function of many variables, and the engineering objective is tocharacterize and model the function.</p>
<h4 id="Residuals-Will-Behave-According-to-Univariate-Assumptions"><a href="#Residuals-Will-Behave-According-to-Univariate-Assumptions" class="headerlink" title="Residuals Will Behave According to Univariate Assumptions"></a>Residuals Will Behave According to Univariate Assumptions</h4><p>The key point is that regardless of how many factors there are, and regardless of how complicated the function is, if the engineer succeeds in choosing a good model, then the differences (residuals) between the raw response data and the predicted values from the fitted model should themselves behave like a univariate process. Furthermore, the residuals from this univariate process fit will behave like:</p>
<pre><code>• random drawings;
• from a fixed distribution;
• with fixed location (namely, 0 in this case); and
• with fixed variation.
</code></pre><h4 id="Validation-of-Model"><a href="#Validation-of-Model" class="headerlink" title="Validation of Model"></a>Validation of Model</h4><p>Thus if the residuals from the fitted model do in fact behave like the ideal, then testing of underlying assumptions becomes a tool for the validation and quality of fit of the chosen model. On the other hand, if the residuals from the chosen fitted model violate one or more of the above univariate assumptions, then the chosen fitted model is inadequate and an opportunity exists for arriving at an improved model.</p>
<h3 id="1-2-2-Importance"><a href="#1-2-2-Importance" class="headerlink" title="1.2.2.Importance"></a>1.2.2.Importance</h3><h4 id="Predictability-and-Statistical-Control"><a href="#Predictability-and-Statistical-Control" class="headerlink" title="Predictability and Statistical Control"></a>Predictability and Statistical Control</h4><p>Predictability is an all-important goal in science and engineering. If the four underlying assumptions hold, then we have achieved probabilistic predictability–the ability to make probability statements not only about the process in the past, but also about the process in the future. In short, such processes are said to be “in statistical control”.</p>
<h4 id="Validity-of-Engineering-Conclusions"><a href="#Validity-of-Engineering-Conclusions" class="headerlink" title="Validity of Engineering Conclusions"></a>Validity of Engineering Conclusions</h4><p>Moreover, if the four assumptions are valid, then the process is amenable to the generation of valid scientific and engineering conclusions. If the four assumptions are not valid, then the process is drifting (with respect to location, variation, or distribution), unpredictable, and out of control. A simple characterization of such processes by a location estimate, a variation estimate, or a distribution “estimate” inevitably leads to engineering conclusions that are not valid, are not supportable (scientifically or legally), and which are not repeatable in the laboratory.</p>
<h3 id="1-2-3-Techniques-for-Testing-Assumptions"><a href="#1-2-3-Techniques-for-Testing-Assumptions" class="headerlink" title="1.2.3. Techniques for Testing Assumptions"></a>1.2.3. Techniques for Testing Assumptions</h3><h4 id="Testing-Underlying-Assumptions-Helps-Assure-the-Validity-of-Scientific-and-Engineering-Conclusions"><a href="#Testing-Underlying-Assumptions-Helps-Assure-the-Validity-of-Scientific-and-Engineering-Conclusions" class="headerlink" title="Testing Underlying Assumptions Helps Assure the Validity of Scientific and Engineering Conclusions"></a>Testing Underlying Assumptions Helps Assure the Validity of Scientific and Engineering Conclusions</h4><p>Because the validity of the final scientific/engineering conclusions is inextricably linked to the validity of the underlying univariate assumptions, it naturally follows that there is a real necessity that each and every one of the above four assumptions be routinely tested.</p>
<h4 id="Four-Techniques-to-Test-Underlying-Assumptions"><a href="#Four-Techniques-to-Test-Underlying-Assumptions" class="headerlink" title="Four Techniques to Test Underlying Assumptions"></a>Four Techniques to Test Underlying Assumptions</h4><p>The following EDA techniques are simple, efficient, and powerful for the routine testing of underlying assumptions:</p>
<pre><code>1. run sequence plot (Yi versus i)
2. lag plot (Yi versus Yi-1)
3. histogram (counts versus subgroups of Y)
4. normal probability plot (ordered Y versus theoretical ordered Y)
</code></pre><h4 id="Plot-on-a-Single-Page-for-a-Quick-Characterization-of-the-Data"><a href="#Plot-on-a-Single-Page-for-a-Quick-Characterization-of-the-Data" class="headerlink" title="Plot on a Single Page for a Quick Characterization of the Data"></a>Plot on a Single Page for a Quick Characterization of the Data</h4><p>The four EDA plots can be juxtaposed for a quick look at the characteristics of the data. The plots below are ordered as follows:</p>
<pre><code>1. Run sequence plot - upper left
2. Lag plot - upper right
3. Histogram - lower left
4. Normal probability plot - lower right
</code></pre><h4 id="Sample-Plot-Assumptions-Hold"><a href="#Sample-Plot-Assumptions-Hold" class="headerlink" title="Sample Plot: Assumptions Hold"></a>Sample Plot: Assumptions Hold</h4><p><img src="assets/EDA/randn4p.gif" alt=""></p>
<p>This 4-plot reveals a process that has fixed location, fixed variation, is random, apparently has a fixed approximately normal distribution, and has no outliers.</p>
<h4 id="Sample-Plot-Assumptions-Do-Not-Hold"><a href="#Sample-Plot-Assumptions-Do-Not-Hold" class="headerlink" title="Sample Plot: Assumptions Do Not Hold"></a>Sample Plot: Assumptions Do Not Hold</h4><p>If one or more of the four underlying assumptions do not hold, then it will show up in the various plots as demonstrated in the following example.</p>
<p><img src="assets/EDA/lew4p.gif" alt=""></p>
<p>This 4-plot reveals a process that has fixed location, fixed variation, is non-random (oscillatory), has a non-normal, U-shaped distribution, and has several outliers.</p>
<h3 id="1-2-4-Interpretation-of-4-Plot"><a href="#1-2-4-Interpretation-of-4-Plot" class="headerlink" title="1.2.4. Interpretation of 4-Plot"></a>1.2.4. Interpretation of 4-Plot</h3><h4 id="Interpretation-of-EDA-Plots"><a href="#Interpretation-of-EDA-Plots" class="headerlink" title="Interpretation of EDA Plots:"></a>Interpretation of EDA Plots:</h4><p>Flat and Equi-Banded, Random, Bell-Shaped, and Linear</p>
<p>The four EDA plots discussed on the previous page are used to test the underlying assumptions:</p>
<pre><code>1. Fixed Location:
    If the fixed location assumption holds, then the run sequence plot will be flat and non-drifting.
2. Fixed Variation:
    If the fixed variation assumption holds, then the vertical spread in the run sequence plot will be the approximately the same over the entire horizontal axis.
3. Randomness:
    If the randomness assumption holds, then the lag plot will be structureless and random.
4. Fixed Distribution:
    If the fixed distribution assumption holds, in particular if the fixed normal distribution holds, then
            1. the histogram will be bell-shaped, and
            2. the normal probability plot will be linear.
</code></pre><h4 id="Plots-Utilized-to-Test-the-Assumptions"><a href="#Plots-Utilized-to-Test-the-Assumptions" class="headerlink" title="Plots Utilized to Test the Assumptions"></a>Plots Utilized to Test the Assumptions</h4><p>Conversely, the underlying assumptions are tested using the EDA plots:</p>
<ul>
<li>Run Sequence Plot:<blockquote>
<p>If the run sequence plot is flat and non-drifting, the fixed-location assumption holds. If the run sequence plot has a vertical spread that is about the same over the entire plot, then the fixed-variation assumption holds.</p>
</blockquote>
</li>
<li>Lag Plot:<blockquote>
<p>If the lag plot is structureless, then the randomness assumption holds.</p>
</blockquote>
</li>
<li>Histogram:<blockquote>
<p>If the histogram is bell-shaped, the underlying distribution is symmetric and perhaps approximately normal.</p>
</blockquote>
</li>
<li>Normal Probability Plot:<blockquote>
<p>If the normal probability plot is linear, the underlying distribution is approximately normal.<br>  If all four of the assumptions hold, then the process is said definitionally to be “in statistical control”.</p>
</blockquote>
</li>
</ul>
<h3 id="1-2-5-Consequences"><a href="#1-2-5-Consequences" class="headerlink" title="1.2.5 Consequences"></a>1.2.5 Consequences</h3><h4 id="What-If-Assumptions-Do-Not-Hold"><a href="#What-If-Assumptions-Do-Not-Hold" class="headerlink" title="What If Assumptions Do Not Hold?"></a>What If Assumptions Do Not Hold?</h4><p>If some of the underlying assumptions do not hold, what can be done about it? What corrective actions can be taken? The positive way of approaching this is to view the testing of underlying assumptions as a framework for learning about the process. Assumption-testing promotes insight into important aspects of the process that may not have surfaced otherwise.</p>
<h4 id="Primary-Goal-is-Correct-and-Valid-Scientific-Conclusions"><a href="#Primary-Goal-is-Correct-and-Valid-Scientific-Conclusions" class="headerlink" title="Primary Goal is Correct and Valid Scientific Conclusions"></a>Primary Goal is Correct and Valid Scientific Conclusions</h4><p>The primary goal is to have correct, validated, and complete scientific/engineering conclusions flowing from the analysis. This usually includes intermediate goals such as the derivation of a good-fitting model and the computation of realistic parameter estimates. It should always include the ultimate goal of an understanding and a “feel” for “what makes the process tick”. There is no more powerful catalyst for discovery than the bringing together of an experienced/expert scientist/engineer and a data set ripe with intriguing “anomalies” and characteristics.</p>
<h4 id="Consequences-of-Invalid-Assumptions"><a href="#Consequences-of-Invalid-Assumptions" class="headerlink" title="Consequences of Invalid Assumptions"></a>Consequences of Invalid Assumptions</h4><p>The following sections discuss in more detail the consequences of invalid assumptions:</p>
<pre><code>1. Consequences of non-randomness
2. Consequences of non-fixed location parameter
3. Consequences of non-fixed variation
4. Consequences related to distributional assumptions
</code></pre><h4 id="1-2-5-1-Consequences-of-Non-Randomness"><a href="#1-2-5-1-Consequences-of-Non-Randomness" class="headerlink" title="1.2.5.1.    Consequences of Non-Randomness"></a>1.2.5.1.    Consequences of Non-Randomness</h4><h5 id="Randomness-Assumption"><a href="#Randomness-Assumption" class="headerlink" title="Randomness Assumption"></a>Randomness Assumption</h5><p>There are four underlying assumptions:</p>
<pre><code>1. randomness;
2. fixed location;
3. fixed variation; and
4. fixed distribution.
</code></pre><p>The randomness assumption is the most critical but the least tested.</p>
<h5 id="Consequeces-of-Non-Randomness"><a href="#Consequeces-of-Non-Randomness" class="headerlink" title="Consequeces of Non-Randomness"></a>Consequeces of Non-Randomness</h5><p>If the randomness assumption does not hold, then</p>
<pre><code>1. All of the usual statistical tests are invalid.
2. The calculated uncertainties for commonly used statistics become meaningless.
3. The calculated minimal sample size required for a pre-specified tolerance becomes meaningless.
4. The simple model: y = constant + error becomes invalid.
5. The parameter estimates become suspect and non-supportable.
</code></pre><h5 id="Non-Randomness-Due-to-Autocorrelation"><a href="#Non-Randomness-Due-to-Autocorrelation" class="headerlink" title="Non-Randomness Due to Autocorrelation"></a>Non-Randomness Due to Autocorrelation</h5><p>One specific and common type of non-randomness is autocorrelation. Autocorrelation is the correlation between Ytand Yt-k, where k is an integer that defines the lag for the autocorrelation. That is, autocorrelation is a time dependent non-randomness. This means that the value of the current point is highly dependent on the previous point if k = 1 (or k points ago if kis not 1). Autocorrelation is typically detected via an autocorrelation plot or a lag plot.<br>If the data are not random due to autocorrelation, then</p>
<pre><code>1. Adjacent data values may be related.
2. There may not be n independent snapshots of the phenomenon under study.
3. There may be undetected &quot;junk&quot;-outliers.
4. There may be undetected &quot;information-rich&quot;-outliers.
</code></pre><h4 id="1-2-5-2-Consequences-of-Non-Fixed-Location-Parameter"><a href="#1-2-5-2-Consequences-of-Non-Fixed-Location-Parameter" class="headerlink" title="1.2.5.2.    Consequences of Non-Fixed Location Parameter"></a>1.2.5.2.    Consequences of Non-Fixed Location Parameter</h4><h5 id="Location-Estimate"><a href="#Location-Estimate" class="headerlink" title="Location Estimate"></a>Location Estimate</h5><p>The usual estimate of location is the mean<br>    Y¯=1N∑i=1NYi<br>from N measurements Y1, Y2, … , YN.</p>
<h5 id="Consequences-of-Non-Fixed-Location"><a href="#Consequences-of-Non-Fixed-Location" class="headerlink" title="Consequences of Non-Fixed Location"></a>Consequences of Non-Fixed Location</h5><p>If the run sequence plot does not support the assumption of fixed location, then</p>
<pre><code>1. The location may be drifting.
2. The single location estimate may be meaningless (if the process is drifting).
3. The choice of location estimator (e.g., the sample mean) may be sub-optimal.
4. The usual formula for the uncertainty of the mean:
</code></pre><p>s(Y¯)=1N(N−1)−−−−−−−−√∑i=1N(Yi−Y¯)2−−−−−−−−−−−⎷<br>may be invalid and the numerical value optimistically small.</p>
<pre><code>5. The location estimate may be poor.
6. The location estimate may be biased.
</code></pre><h4 id="1-2-5-3-Consequences-of-Non-Fixed-Variation-Parameter"><a href="#1-2-5-3-Consequences-of-Non-Fixed-Variation-Parameter" class="headerlink" title="1.2.5.3.    Consequences of Non-Fixed Variation Parameter"></a>1.2.5.3.    Consequences of Non-Fixed Variation Parameter</h4><h5 id="Variation-Estimate"><a href="#Variation-Estimate" class="headerlink" title="Variation Estimate"></a>Variation Estimate</h5><p>The usual estimate of variation is the standard deviation<br>    sY=1(N−1)−−−−−−−√∑i=1N(Yi−Y¯)2−−−−−−−−−−−⎷<br>from N measurements Y1, Y2, … , YN.</p>
<h5 id="Consequences-of-Non-Fixed-Variation"><a href="#Consequences-of-Non-Fixed-Variation" class="headerlink" title="Consequences of Non-Fixed Variation"></a>Consequences of Non-Fixed Variation</h5><p>If the run sequence plot does not support the assumption of fixed variation, then</p>
<pre><code>1. The variation may be drifting.
2. The single variation estimate may be meaningless (if the process variation is drifting).
3. The variation estimate may be poor.
4. The variation estimate may be biased.
</code></pre><h4 id="1-2-5-4-Consequences-Related-to-Distributional-Assumptions"><a href="#1-2-5-4-Consequences-Related-to-Distributional-Assumptions" class="headerlink" title="1.2.5.4. Consequences Related to Distributional Assumptions"></a>1.2.5.4. Consequences Related to Distributional Assumptions</h4><h5 id="Distributional-Analysis"><a href="#Distributional-Analysis" class="headerlink" title="Distributional Analysis"></a>Distributional Analysis</h5><p>Scientists and engineers routinely use the mean (average) to estimate the “middle” of a distribution. It is not so well known that the variability and the noisiness of the mean as a location estimator are intrinsically linked with the underlying distribution of the data. For certain distributions, the mean is a poor choice. For any given distribution, there exists an optimal choice– that is, the estimator with minimum variability/noisiness. This optimal choice may be, for example, the median, the midrange, the midmean, the mean, or something else. The implication of this is to “estimate” the distribution first, and then–based on the distribution–choose the optimal estimator. The resulting engineering parameter estimators will have less variability than if this approach is not followed.</p>
<h5 id="Case-Studies"><a href="#Case-Studies" class="headerlink" title="Case Studies"></a>Case Studies</h5><p>The airplane glass failure case study gives an example of determining an appropriate distribution and estimating the parameters of that distribution. The uniform random numberscase study gives an example of determining a more appropriate centrality parameter for a non-normal distribution.</p>
<p>Other consequences that flow from problems with distributional assumptions are:</p>
<h5 id="Distribution"><a href="#Distribution" class="headerlink" title="Distribution"></a>Distribution</h5><pre><code>1. The distribution may be changing.
2. The single distribution estimate may be meaningless (if the process distribution is changing).
3. The distribution may be markedly non-normal.
4. The distribution may be unknown.
5. The true probability distribution for the error may remain unknown.
</code></pre><h5 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h5><pre><code>1. The model may be changing.
2. The single model estimate may be meaningless.
3. The default model
    Y = constant + error
    may be invalid.
4. If the default model is insufficient, information about a better model may remain undetected.
5. A poor deterministic model may be fit.
6. Information about an improved model may go undetected.
</code></pre><h5 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h5><pre><code>1. The process may be out-of-control.
2. The process may be unpredictable.
3. The process may be un-modelable.
</code></pre>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Comparative/" rel="tag"># Comparative</a>
          
            <a href="/tags/Screening/" rel="tag"># Screening</a>
          
            <a href="/tags/Optimization/" rel="tag"># Optimization</a>
          
            <a href="/tags/Regression/" rel="tag"># Regression</a>
          
            <a href="/tags/Time-Series/" rel="tag"># Time Series</a>
          
            <a href="/tags/Multivariate/" rel="tag"># Multivariate</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/02/Exploratory Data Analysis(一)/" rel="next" title="Exploratory Data Analysis(一)">
                <i class="fa fa-chevron-left"></i> Exploratory Data Analysis(一)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/02/MathJax basic tutorial and quick reference/" rel="prev" title="MathJax basic tutorial and quick reference">
                MathJax basic tutorial and quick reference <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/assets/pic_avatar.jpg"
                alt="boredbird" />
            
              <p class="site-author-name" itemprop="name">boredbird</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">199</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">246</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/boredbird" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-globe"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://weibo.com/boredbird" target="_blank" title="微博">
                    
                      <i class="fa fa-fw fa-globe"></i>微博</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-EDA-Assumptions"><span class="nav-number">1.</span> <span class="nav-text">1.2. EDA Assumptions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1-Underlying-Assumptions"><span class="nav-number">1.1.</span> <span class="nav-text">1.2.1. Underlying Assumptions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Assumptions-Underlying-a-Measurement-Process"><span class="nav-number">1.1.1.</span> <span class="nav-text">Assumptions Underlying a Measurement Process</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Univariate-or-Single-Response-Variable"><span class="nav-number">1.1.2.</span> <span class="nav-text">Univariate or Single Response Variable</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Assumptions-for-Univariate-Model"><span class="nav-number">1.1.3.</span> <span class="nav-text">Assumptions for Univariate Model</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Extrapolation-to-a-Function-of-Many-Variables"><span class="nav-number">1.1.4.</span> <span class="nav-text">Extrapolation to a Function of Many Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Residuals-Will-Behave-According-to-Univariate-Assumptions"><span class="nav-number">1.1.5.</span> <span class="nav-text">Residuals Will Behave According to Univariate Assumptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Validation-of-Model"><span class="nav-number">1.1.6.</span> <span class="nav-text">Validation of Model</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2-Importance"><span class="nav-number">1.2.</span> <span class="nav-text">1.2.2.Importance</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Predictability-and-Statistical-Control"><span class="nav-number">1.2.1.</span> <span class="nav-text">Predictability and Statistical Control</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Validity-of-Engineering-Conclusions"><span class="nav-number">1.2.2.</span> <span class="nav-text">Validity of Engineering Conclusions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3-Techniques-for-Testing-Assumptions"><span class="nav-number">1.3.</span> <span class="nav-text">1.2.3. Techniques for Testing Assumptions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Testing-Underlying-Assumptions-Helps-Assure-the-Validity-of-Scientific-and-Engineering-Conclusions"><span class="nav-number">1.3.1.</span> <span class="nav-text">Testing Underlying Assumptions Helps Assure the Validity of Scientific and Engineering Conclusions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Four-Techniques-to-Test-Underlying-Assumptions"><span class="nav-number">1.3.2.</span> <span class="nav-text">Four Techniques to Test Underlying Assumptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Plot-on-a-Single-Page-for-a-Quick-Characterization-of-the-Data"><span class="nav-number">1.3.3.</span> <span class="nav-text">Plot on a Single Page for a Quick Characterization of the Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sample-Plot-Assumptions-Hold"><span class="nav-number">1.3.4.</span> <span class="nav-text">Sample Plot: Assumptions Hold</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sample-Plot-Assumptions-Do-Not-Hold"><span class="nav-number">1.3.5.</span> <span class="nav-text">Sample Plot: Assumptions Do Not Hold</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-4-Interpretation-of-4-Plot"><span class="nav-number">1.4.</span> <span class="nav-text">1.2.4. Interpretation of 4-Plot</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Interpretation-of-EDA-Plots"><span class="nav-number">1.4.1.</span> <span class="nav-text">Interpretation of EDA Plots:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Plots-Utilized-to-Test-the-Assumptions"><span class="nav-number">1.4.2.</span> <span class="nav-text">Plots Utilized to Test the Assumptions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-5-Consequences"><span class="nav-number">1.5.</span> <span class="nav-text">1.2.5 Consequences</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#What-If-Assumptions-Do-Not-Hold"><span class="nav-number">1.5.1.</span> <span class="nav-text">What If Assumptions Do Not Hold?</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Primary-Goal-is-Correct-and-Valid-Scientific-Conclusions"><span class="nav-number">1.5.2.</span> <span class="nav-text">Primary Goal is Correct and Valid Scientific Conclusions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Consequences-of-Invalid-Assumptions"><span class="nav-number">1.5.3.</span> <span class="nav-text">Consequences of Invalid Assumptions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5-1-Consequences-of-Non-Randomness"><span class="nav-number">1.5.4.</span> <span class="nav-text">1.2.5.1.    Consequences of Non-Randomness</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Randomness-Assumption"><span class="nav-number">1.5.4.1.</span> <span class="nav-text">Randomness Assumption</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Consequeces-of-Non-Randomness"><span class="nav-number">1.5.4.2.</span> <span class="nav-text">Consequeces of Non-Randomness</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Non-Randomness-Due-to-Autocorrelation"><span class="nav-number">1.5.4.3.</span> <span class="nav-text">Non-Randomness Due to Autocorrelation</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5-2-Consequences-of-Non-Fixed-Location-Parameter"><span class="nav-number">1.5.5.</span> <span class="nav-text">1.2.5.2.    Consequences of Non-Fixed Location Parameter</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Location-Estimate"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">Location Estimate</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Consequences-of-Non-Fixed-Location"><span class="nav-number">1.5.5.2.</span> <span class="nav-text">Consequences of Non-Fixed Location</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5-3-Consequences-of-Non-Fixed-Variation-Parameter"><span class="nav-number">1.5.6.</span> <span class="nav-text">1.2.5.3.    Consequences of Non-Fixed Variation Parameter</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Variation-Estimate"><span class="nav-number">1.5.6.1.</span> <span class="nav-text">Variation Estimate</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Consequences-of-Non-Fixed-Variation"><span class="nav-number">1.5.6.2.</span> <span class="nav-text">Consequences of Non-Fixed Variation</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-5-4-Consequences-Related-to-Distributional-Assumptions"><span class="nav-number">1.5.7.</span> <span class="nav-text">1.2.5.4. Consequences Related to Distributional Assumptions</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Distributional-Analysis"><span class="nav-number">1.5.7.1.</span> <span class="nav-text">Distributional Analysis</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Case-Studies"><span class="nav-number">1.5.7.2.</span> <span class="nav-text">Case Studies</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Distribution"><span class="nav-number">1.5.7.3.</span> <span class="nav-text">Distribution</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Model"><span class="nav-number">1.5.7.4.</span> <span class="nav-text">Model</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Process"><span class="nav-number">1.5.7.5.</span> <span class="nav-text">Process</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">boredbird</span>
	
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>

	

  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'mail';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'MsiMHXmbOdE3GRdsjoFkKyq1-gzGzoHsz',
        appKey: 'KBnfHQQuodOjv7kpHuwXQayz',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('5');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Qdwnt2WIsDObM1eTLlLD1OI4-gzGzoHsz", "00KjxKaT2mrOLIDcLLj4YXpF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

  
  
  <!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("Qdwnt2WIsDObM1eTLlLD1OI4-gzGzoHsz", "00KjxKaT2mrOLIDcLLj4YXpF");</script>
<script>
function showTime(Counter) {
	var query = new AV.Query(Counter);
	$(".leancloud_visitors").each(function() {
		var url = $(this).attr("id").trim();
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length == 0) {
					var content = '0 ' + $(document.getElementById(url)).text();
					$(document.getElementById(url)).text(content);
					return;
				}
				for (var i = 0; i < results.length; i++) {
					var object = results[i];
					var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
					$(document.getElementById(url)).text(content);
				}
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});

	});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else if ($('.post-title-link').length > 1) {
		showTime(Counter);
	}
}); 
</script>
  
</body>
</html>
